<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jakhong League System 4.2 (Modified)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,300;0,400;0,600;0,800;1,800&display=swap" rel="stylesheet">

    <style>
        /* --- DYNAMIC THEME VARIABLES (NEW) --- */
        :root {
            --primary-color: #facc15; /* Default Yellow-400 (Accent) */
            --secondary-color: #1c365b; /* Default Dark Blue (Header/Base Gradient Start) */
            --theme-end: #0c1626;   /* Very Dark Blue (Fixed Background Base) */
        }
        body {
            font-family: 'Kanit', sans-serif;
            background-color: var(--theme-end);
            color: white;
            background-image: radial-gradient(circle at top right, #34050520 0%, transparent 40%),
                              radial-gradient(circle at bottom left, #1a1a1a 0%, transparent 40%);
            min-height: 100vh;
        }
        .glass {
            background: rgba(12, 22, 38, 0.7);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        .navbar {
            background: rgba(12, 22, 38, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--primary-color);
        }
        .nav-btn {
            color: #ccc;
            border: 1px solid transparent;
            transition: all 0.2s;
        }
        .nav-btn.active {
            background: var(--primary-color); 
            color: #000;
            font-weight: 700;
            border: 1px solid var(--primary-color);
            transform: scale(1.05);
        }
        .nav-btn:hover:not(.active) {
            background: rgba(var(--primary-color), 0.1); 
            color: var(--primary-color);
        }
        .logo-circle {
            border-radius: 50%;
            object-fit: cover;
            aspect-ratio: 1/1;
        }

        /* Player Card Design (Kept minimal style) */
        .player-card {
            background: linear-gradient(145deg, #1f2937, #0c1626);
            transition: all 0.3s;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .player-photo-container {
            position: relative;
            overflow: hidden;
            background-color: #0c1626;
            border-bottom: 3px solid var(--primary-color);
            aspect-ratio: 3 / 4; 
        }
        .player-photo-container img {
            height: 100%;
            width: 100%;
            object-fit: cover;
            object-position: top center;
        }
        /* Player Number Style (Circular only) */
        .player-num-tag {
            position: absolute;
            top: 5px;
            left: 5px;
            background: var(--primary-color); 
            color: black;
            font-size: 0.9rem; /* Slightly larger circle */
            font-weight: 900;
            width: 32px; 
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            border: 2px solid white;
            z-index: 20;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: #555; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-color); } 
        .no-scrollbar::-webkit-scrollbar { display: none; }

        .outline-text {
            text-shadow: 2px 2px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;
        }
        
        /* Schedule Grouping */
        .schedule-group-header {
            background-color: var(--primary-color); 
            color: black;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
            margin-top: 1.5rem;
            box-shadow: 0 4px 10px rgba(var(--primary-color), 0.2); 
        }
        /* Daily Summary Score Style (FIXED: Score Overlap) */
        .daily-score-box {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem; /* 3xl */
            font-weight: 900; /* black */
            letter-spacing: -0.05em; /* tracking-tighter */
            position: relative;
        }
        /* --- FIX: REMOVED TEXT SHADOW ON SCORE NUMBERS --- */
        .daily-score-number {
            width: 50px;            /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
            height: 50px;           /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
            display: flex;          /* ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ Flexbox */
            justify-content: center; /* ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
            align-items: center;    /* ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
            border-radius: 6px;     /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ç‡∏≠‡∏ö */
            line-height: 1;
            z-index: 10; 
        }
        
        .daily-vs {
            /* FIX: Make VS smaller and central */
            font-size: 1rem;
            font-weight: 700;
            margin: 0 0.3rem;
            z-index: 5;
            color: #ccc;
        }

       /* FIX: Today Scorer Number Tag (‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏µ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) */
.today-scorer-num-tag {
    position: absolute;
    top: 5px;
    right: 5px;
    
    /* *** ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß *** */
    background: white; 
    
    /* *** ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏î‡∏≥ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß *** */
    color: black; 
    
    font-size: 0.7rem;
    font-weight: 900;
    width: 22px;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    
    /* *** ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏£‡∏≠‡∏ö‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß (‡πÅ‡∏ó‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á/‡∏™‡∏µ‡∏ò‡∏µ‡∏°) *** */
    border: 2px solid white; 
    
    z-index: 20;
    /* ‡∏Ñ‡∏á‡πÄ‡∏á‡∏≤‡πÑ‡∏ß‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡πâ‡∏≤‡∏¢‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏¢‡∏±‡∏á‡∏î‡∏π‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
}
        

        /* --- SCHEDULE CARD NEW DESIGN --- */
        .schedule-match-card {
            background: #111827; /* gray-900 */
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            display: grid;
            grid-template-columns: 1fr 150px 1fr; /* Team A | Center Info | Team B */
            align-items: center;
            cursor: pointer;
            overflow: hidden;
        }
        .schedule-match-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
        }
        
        /* FIX: Logo to be big and no padding/border */
        .schedule-team-logo {
        width: 60px;
        height: 60px;
        object-fit: cover; 
        border-radius: 50%;
        }
        
        /* Center Info Style */
        .schedule-center-info {
            position: relative;
            text-align: center;
            padding: 1rem 0;
            z-index: 10;
        }
        /* VS Separator (Cooler effect) */
        .schedule-center-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 100%;
            background: repeating-linear-gradient(to bottom, var(--primary-color), var(--primary-color) 4px, transparent 4px, transparent 8px);
            opacity: 0.2;
            z-index: 5;
        }

        /* Action Buttons Container (Hidden by default) - REMOVED EDIT BUTTON */
        .schedule-actions {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 20;
            background: rgba(0, 0, 0, 0.8);
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid var(--primary-color);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        .schedule-match-card.show-actions .schedule-actions {
            opacity: 1;
            visibility: visible;
        }
        /* Team Containers */
        .schedule-team-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
        }
        .schedule-team-container.team-a { text-align: right; }
        .schedule-team-container.team-b { text-align: left; }
        .schedule-team-container .flex { margin-top: 8px; }

        /* Media Query for larger screens */
        @media (min-width: 640px) {
            .schedule-team-container.team-a { 
                flex-direction: row; 
                justify-content: flex-end;
                text-align: right;
                gap: 12px;
            }
            .schedule-team-container.team-b { 
                flex-direction: row; 
                justify-content: flex-start;
                text-align: left;
                gap: 12px;
            }
            /* Adjust padding on larger screens */
            .schedule-team-container { padding: 1.5rem 1rem; }
        }

        /* --- NEW: Daily Top Scorer Grid Design (Desktop) --- */
        .top-scorer-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr); /* Default to 1 column */
            gap: 1rem;
        }
        @media (min-width: 768px) { /* md: */
            .top-scorer-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        @media (min-width: 1024px) { /* lg: */
            .top-scorer-grid {
                grid-template-columns: repeat(5, 1fr); /* 5 columns for top 5 */
            }
        }
        .scorer-card {
            background: #1f2937;
            border-radius: 12px;
            padding: 0.75rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            transition: all 0.2s;
        }
        .scorer-card.is-top {
            border-color: var(--primary-color);
        }
        .scorer-card-img {
            width: 100%;
            height: auto;
            max-height: 150px;
            object-fit: cover;
            border-radius: 8px;
            border: 3px solid white;
            margin-bottom: 0.5rem;
            aspect-ratio: 3/4;
        }
        
        .scorer-rank-tag {
            position: absolute;
            top: 15px; 
            left: 10px; 
            transform: translateY(-50%); 
            
            background: var(--primary-color);
            color: black; 
            
            font-size: 0.9rem; 
            font-weight: 900;
            width: 32px; 
            height: 32px; 
            
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            border: 2px solid white; 
            z-index: 20;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        /* --- NEW: All Stats Filter Styles --- */
        .all-stats-row {
            transition: all 0.1s;
        }
        .all-stats-row:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
    </style>
</head>
<body class="flex flex-col">

    <nav class="navbar sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between py-3">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full flex items-center justify-center shadow-lg border border-white" 
                         style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color))">
                        <i class="fas fa-trophy text-black"></i>
                    </div>
                    <h1 class="text-xl font-extrabold italic uppercase tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 to-yellow-500" 
                        id="nav-title">
                        JAKHONG SYSTEM
                    </h1>
                </div>
                <button onclick="toggleSettings()" class="text-gray-400 hover:text-white transition"><i class="fas fa-cog text-xl"></i></button>
            </div>
            <div class="flex overflow-x-auto gap-3 pb-3 no-scrollbar">
                <button onclick="nav('home', this)" class="nav-btn active px-4 py-1.5 rounded-full text-sm whitespace-nowrap transition"><i class="fas fa-home"></i> ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</button>
                <button onclick="nav('leaderboard', this)" class="nav-btn px-4 py-1.5 rounded-full text-sm whitespace-nowrap transition"><i class="fas fa-list-ol"></i> ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
                <button onclick="nav('schedule', this)" class="nav-btn px-4 py-1.5 rounded-full text-sm whitespace-nowrap transition"><i class="fas fa-calendar-alt"></i> ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏Ç‡πà‡∏á</button>
                <button onclick="nav('daily', this)" class="nav-btn px-4 py-1.5 rounded-full text-sm whitespace-nowrap transition"><i class="fas fa-star"></i> ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•/‡∏î‡∏≤‡∏ß‡∏ã‡∏±‡∏•‡πÇ‡∏ß</button>
                <button onclick="nav('stats', this)" class="nav-btn px-4 py-1.5 rounded-full text-sm whitespace-nowrap transition"><i class="fas fa-chart-bar"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</button>
                <button onclick="nav('teams', this)" class="nav-btn px-4 py-1.5 rounded-full text-sm whitespace-nowrap transition"><i class="fas fa-shield-alt"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°</button>
                <button onclick="nav('players', this)" class="nav-btn px-4 py-1.5 rounded-full text-sm whitespace-nowrap transition"><i class="fas fa-users"></i> ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞</button>
            </div>
        </div>
    </nav>

    <main class="flex-grow container mx-auto px-2 py-6 md:px-4">

        <div id="page-home" class="section fade-in">
            <div class="glass p-6 rounded-2xl mb-6">
                <h2 class="text-2xl font-extrabold mb-4 flex items-center gap-3" style="color: var(--primary-color);">
                    <i class="fas fa-chart-line"></i> ‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏•‡∏µ‡∏Å
                </h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div class="bg-gray-800 p-4 rounded-xl shadow-lg border-b-4" style="border-color: var(--primary-color);">
                        <div class="text-3xl font-black" id="stat-total-teams">0</div>
                        <div class="text-gray-400 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡∏°</div>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-xl shadow-lg border-b-4 border-green-500">
                        <div class="text-3xl font-black" id="stat-total-stats">0</div>
                        <div class="text-gray-400 text-sm">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</div> 
                    </div>
                    <div class="bg-gray-800 p-4 rounded-xl shadow-lg border-b-4 border-red-500">
                        <div class="text-3xl font-black" id="stat-total-goals">0</div>
                        <div class="text-gray-400 text-sm">‡∏£‡∏ß‡∏°‡∏õ‡∏£‡∏∞‡∏ï‡∏π</div>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-xl shadow-lg border-b-4 border-blue-500">
                        <div class="text-3xl font-black" id="stat-total-players">0</div>
                        <div class="text-gray-400 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞</div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div id="leader-team-card" class="glass p-5 rounded-2xl border-l-4 flex items-center gap-4" style="border-color: var(--primary-color);">
                    <i class="fas fa-trophy text-4xl" style="color: var(--primary-color);"></i>
                    <div>
                        <div class="text-lg font-bold" style="color: var(--primary-color);">‡∏ó‡∏µ‡∏°‡∏ô‡∏≥‡∏à‡πà‡∏≤‡∏ù‡∏π‡∏á</div>
                        <div class="text-3xl font-extrabold" id="leader-team-name">...</div>
                        <div class="text-sm text-gray-400">PTS: <span id="leader-team-pts">...</span></div>
                    </div>
                </div>
                <div id="top-scorer-card" class="glass p-5 rounded-2xl border-l-4 flex items-center gap-4" style="border-color: var(--primary-color);">
                    <i class="fas fa-star text-4xl text-red-500"></i>
                    <div>
                        <div class="text-lg font-bold" style="color: var(--primary-color);">‡∏î‡∏≤‡∏ß‡∏ã‡∏±‡∏•‡πÇ‡∏ß</div>
                        <div class="text-3xl font-extrabold" id="top-scorer-name">...</div>
                        <div class="text-sm text-gray-400">Goals: <span id="top-scorer-goals">...</span></div>
                    </div>
                </div>
            </div>

            <div class="glass p-6 rounded-2xl">
                <h2 class="text-xl font-bold mb-4 flex items-center gap-3" style="color: var(--primary-color);">
                    <i class="fas fa-user-tie"></i> ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°
                </h2>
                <div id="manager-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                </div>
            </div>
        </div>

        <div id="page-leaderboard" class="section hidden fade-in">
            <div class="glass p-3 rounded-xl mb-4 flex flex-wrap gap-4 items-center text-xs">
                <strong class="text-yellow-400">‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á:</strong>
                <div><label>‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á</label><input type="color" id="lb-bg-body" value="#1e293b" class="w-5 h-5 rounded align-middle ml-1 cursor-pointer" oninput="renderLeaderboard()"></div>
                <div><label>‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</label><input type="color" id="lb-body-text-color" value="#ffffff" class="w-5 h-5 rounded align-middle ml-1 cursor-pointer" oninput="renderLeaderboard()"></div>
                <div class="h-4 w-px bg-gray-600"></div>
                <div><label>‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á 1</label><input type="color" id="lb-header-grad-1" value="#1c365b" class="w-5 h-5 rounded align-middle ml-1 cursor-pointer" oninput="renderLeaderboard()"></div>
                <div><label>‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á 2</label><input type="color" id="lb-header-grad-2" value="#0c1626" class="w-5 h-5 rounded align-middle ml-1 cursor-pointer" oninput="renderLeaderboard()"></div>
                <div><label>‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á</label><input type="color" id="lb-header-text-color" value="#facc15" class="w-5 h-5 rounded align-middle ml-1 cursor-pointer" oninput="renderLeaderboard()"></div>
                <div class="h-4 w-px bg-gray-600"></div>
                <div><label>‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ï‡πâ‡∏° 1</label><input type="color" id="lb-pts-grad-1" value="#facc15" class="w-5 h-5 rounded align-middle ml-1 cursor-pointer" oninput="renderLeaderboard()"></div>
                <div><label>‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ï‡πâ‡∏° 2</label><input type="color" id="lb-pts-grad-2" value="#facc15" class="w-5 h-5 rounded align-middle ml-1 cursor-pointer" oninput="renderLeaderboard()"></div>
            </div>

            <div class="glass rounded-xl overflow-hidden">
                <div id="lb-banner" class="p-4 text-center font-black text-2xl uppercase tracking-widest text-white" 
                     style="background: linear-gradient(135deg, var(--secondary-color), var(--theme-end))">
                    ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm">
                        <thead>
                            <tr id="lb-thead-row" class="font-bold text-xs uppercase" 
                                style="background: linear-gradient(to right, #1c365b, #0c1626)">
                                <th class="p-2 text-center" style="color: #facc15;">#</th>
                                <th class="p-2 text-left" style="color: #facc15;">‡∏ó‡∏µ‡∏°</th>
                                <th class="p-2 text-center" style="color: #facc15;">‡πÅ‡∏Ç‡πà‡∏á</th>
                                <th class="p-2 text-center" style="color: #facc15;">‡∏ä‡∏ô‡∏∞</th>
                                <th class="p-2 text-center" style="color: #facc15;">‡πÄ‡∏™‡∏°‡∏≠</th>
                                <th class="p-2 text-center" style="color: #facc15;">‡πÅ‡∏û‡πâ</th>
                                <th class="p-2 text-center" style="color: #facc15;">‡πÑ‡∏î‡πâ</th>
                                <th class="p-2 text-center" style="color: #facc15;">‡πÄ‡∏™‡∏µ‡∏¢</th>
                                <th class="p-2 text-center" style="color: #facc15;">+/-</th>
                                <th class="p-2 text-center w-[60px] text-black">
                                    <div class="p-1 rounded font-black text-black" style="background: #facc15;">PTS</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="lb-body" class="divide-y divide-gray-700">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="page-schedules" class="section hidden fade-in">
            <div class="glass p-4 rounded-xl">
                <div class="flex items-center gap-3 mb-2 transform skew-x-[-10deg]"> 
                    <span id="sc-pill" class="text-black px-4 py-1.5 rounded font-black text-2xl uppercase" 
                          style="background-color: var(--primary-color);">‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</span>
                </div>
                
                <div id="group-stage-container" class="mb-8 mt-6">
                    <h2 class="text-2xl font-bold mb-4 border-l-4 pl-3" style="border-color: var(--primary-color);">
                        ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡∏° (Group Stage) 
                    </h2>
                    <div id="team-group-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                        </div>
                </div>
                <h3 class="text-xl font-bold mt-8 mb-4 border-l-4 pl-3" style="border-color: var(--primary-color);">
                    <i class="fas fa-calendar-check"></i> ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
                </h3>

                <div class="flex gap-3 justify-center mb-6 overflow-x-auto no-scrollbar" id="group-tabs-container">
                    <button onclick="setGroupFilter('All', this)" class="group-tab active text-black px-4 py-1 rounded-full text-sm font-bold transition hover:bg-yellow-600" style="background-color: var(--primary-color);">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                    </div>

                <div id="sched-list" class="space-y-4 max-w-4xl mx-auto">
                    </div>
            </div>
            
            <div id="sc-bg-overlay" class="absolute inset-0 z-0 bg-gradient-to-br from-blue-900 to-black opacity-10 hidden"></div>
        </div>

        <div id="page-daily" class="section hidden fade-in">
            <div class="glass p-4 rounded-xl mb-4">
                <h2 class="text-2xl font-extrabold mb-4 flex items-center gap-3" style="color: var(--primary-color);">
                    <i class="fas fa-star"></i> ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô / ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏ß‡∏°
                </h2>
                
                <div class="flex flex-wrap items-end gap-4 mb-6">
                    <div>
                        <label class="text-xs text-gray-400 block mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π</label>
                        <input type="date" id="daily-date-input" class="bg-gray-800 border border-gray-600 p-2 rounded text-white text-sm" onchange="renderDaily()">
                    </div>
                    <div>
                        <label class="text-xs text-gray-400 block mb-1">‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</label>
                        <select id="daily-view-mode" class="bg-gray-800 border border-gray-600 p-2 rounded text-white text-sm">
                            <option value="daily">‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô/‡∏î‡∏≤‡∏ß‡∏ã‡∏±‡∏•‡πÇ‡∏ß</option>
                            <option value="stats">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥/‡∏ó‡∏≥‡πÄ‡∏ô‡∏µ‡∏¢‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                        </select>
                    </div>
                </div>

                <div id="daily-content">
                    <div id="daily-match-summary" class="glass p-4 rounded-xl mb-6">
                        <h3 class="text-xl font-bold mb-4 border-b pb-2" style="border-color: var(--primary-color);">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ (<span id="daily-date-display">...</span>)</h3>
                        <div id="daily-match-list" class="space-y-3">
                            </div>
                    </div>

                    <div id="daily-top-scorer" class="glass p-4 rounded-xl mb-6">
                        <h3 class="text-xl font-bold mb-4 border-b pb-2 text-green-400" style="border-color: var(--primary-color);">
                            <i class="fas fa-trophy"></i> ‡∏î‡∏≤‡∏ß‡∏ã‡∏±‡∏•‡πÇ‡∏ß‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
                        </h3>
                        <div id="daily-today-scorers" class="top-scorer-grid">
                            </div>
                        <p id="daily-no-scorer" class="hidden text-center text-gray-500 py-4">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ó‡∏≥‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                    </div>

                    <div id="daily-top-assist" class="glass p-4 rounded-xl">
                        <h3 class="text-xl font-bold mb-4 border-b pb-2 text-blue-400" style="border-color: var(--primary-color);">
                            <i class="fas fa-handshake"></i> ‡∏ú‡∏π‡πâ‡∏ó‡∏≥‡πÅ‡∏≠‡∏™‡∏ã‡∏¥‡∏™‡∏ï‡πå‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
                        </h3>
                        <div id="daily-top-assist-list" class="space-y-2">
                            </div>
                        <p id="daily-no-assist" class="hidden text-center text-gray-500 py-4">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏≠‡∏™‡∏ã‡∏¥‡∏™‡∏ï‡πå</p>
                    </div>
                </div>
                
                <div id="all-stats-content" class="hidden">
                    <div id="all-stats-list-container" class="glass rounded-xl overflow-hidden">
                        <div id="all-stats-header" class="p-3 font-bold text-center uppercase" style="background-color: var(--secondary-color);">
                            ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </div>
                        <table class="min-w-full text-sm">
                            <thead>
                                <tr class="font-bold text-xs uppercase bg-gray-700">
                                    <th class="p-2 text-center w-10">#</th>
                                    <th class="p-2 text-left">‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞</th>
                                    <th class="p-2 text-center">‡∏ó‡∏µ‡∏°</th>
                                    <th class="p-2 text-center w-20">‡∏£‡∏ß‡∏°</th>
                                </tr>
                            </thead>
                            <tbody id="all-stats-body" class="divide-y divide-gray-800">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="daily-controls" class="fixed bottom-6 right-4 z-40 p-4 glass rounded-xl shadow-2xl">
                <h3 class="font-bold mb-3" style="color: var(--primary-color);">‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div><label class="text-xs text-gray-400 block mb-1">‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î</label><input type="color" id="d-card-bg" value="#111827" class="w-8 h-8 rounded cursor-pointer" oninput="renderDaily()"></div>
                    <div><label class="text-xs text-gray-400 block mb-1">‡∏™‡∏µ‡∏ä‡∏∑‡πà‡∏≠/‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label><input type="color" id="d-card-text" value="#ffffff" class="w-8 h-8 rounded cursor-pointer" oninput="renderDaily()"></div>
                </div>
            </div>
            
            <div id="all-stats-controls" class="hidden fixed bottom-6 right-4 z-40 p-4 glass rounded-xl shadow-2xl">
                 <label class="text-xs text-gray-400 block mb-1">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á</label>
                 <select id="stat-filter-type" class="bg-black border border-gray-600 p-2 rounded text-white text-sm" onchange="renderAllStats()">
                    <option value="goal">‡∏õ‡∏£‡∏∞‡∏ï‡∏π</option>
                    <option value="assist">‡πÅ‡∏≠‡∏™‡∏ã‡∏¥‡∏™‡∏ï‡πå</option>
                    <option value="yellow">‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á</option>
                    <option value="red">‡πÉ‡∏ö‡πÅ‡∏î‡∏á</option>
                    <option value="save">‡πÄ‡∏ã‡∏ü</option>
                 </select>
            </div>
        </div>

        <div id="page-stats" class="section hidden fade-in">
            <div class="glass p-6 rounded-xl mb-6">
                <h2 class="text-2xl font-extrabold mb-4 flex items-center gap-3" style="color: var(--primary-color);">
                    <i class="fas fa-chart-bar"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (Goal/Card/Save)
                </h2>
                <form id="stat-form" onsubmit="handleStatSubmit(event)">
                    <input type="hidden" id="edit-stat-id">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label for="s-date" class="block text-sm font-medium mb-1 text-gray-400">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                            <input type="date" id="s-date" required class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white">
                        </div>
                        <div>
                            <label for="s-type" class="block text-sm font-medium mb-1 text-gray-400">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</label>
                            <select id="s-type" required class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white" onchange="updateTeamFilter()">
                                <option value="goal">‡∏õ‡∏£‡∏∞‡∏ï‡∏π (Goal)</option>
                                <option value="yellow">‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á (Yellow Card)</option>
                                <option value="red">‡πÉ‡∏ö‡πÅ‡∏î‡∏á (Red Card)</option>
                                <option value="save">‡πÄ‡∏ã‡∏ü (Save)</option>
                            </select>
                        </div>
                        <div>
                            <label for="s-team" class="block text-sm font-medium mb-1 text-gray-400">‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</label>
                            <select id="s-team" required class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white" onchange="updatePlayerSelect()">
                                </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                         <div>
                            <label for="s-player" class="block text-sm font-medium mb-1 text-gray-400">‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</label>
                            <select id="s-player" required class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white">
                                </select>
                        </div>
                        <div>
                            <label for="s-count" class="block text-sm font-medium mb-1 text-gray-400">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô / ‡πÅ‡∏ï‡πâ‡∏°</label>
                            <div class="flex items-center">
                                <button type="button" onclick="adjStat(-1)" class="bg-red-600 hover:bg-red-700 text-white p-2 rounded-l font-black w-10 transition">-</button>
                                <input type="number" id="s-count" value="1" min="1" required class="w-full text-center bg-gray-800 border-y border-gray-700 p-2 text-white">
                                <button type="button" onclick="adjStat(1)" class="bg-green-600 hover:bg-green-700 text-white p-2 rounded-r font-black w-10 transition">+</button>
                            </div>
                        </div>
                        <div class="flex items-end pt-5 md:pt-0">
                            <button type="submit" class="w-full text-black px-4 py-2 rounded font-bold hover:opacity-90 transition" style="background-color: var(--primary-color);" id="stat-submit-btn">
                                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="glass p-6 rounded-xl">
                <h2 class="text-2xl font-extrabold mb-4 flex items-center gap-3" style="color: var(--primary-color);">
                    <i class="fas fa-history"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                </h2>
                <div id="stats-history-list" class="space-y-2">
                    </div>
            </div>
        </div>

        <div id="page-teams" class="section hidden fade-in">
            <div class="glass p-6 rounded-xl mb-6">
                <h2 class="text-2xl font-extrabold mb-4 flex items-center gap-3" style="color: var(--primary-color);">
                    <i class="fas fa-shield-alt"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô
                </h2>
                <form id="team-form" onsubmit="handleTeamSubmit(event)">
                    <input type="hidden" id="edit-team-id">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="t-name" class="block text-sm font-medium mb-1 text-gray-400">‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏°</label>
                            <input type="text" id="t-name" required class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white">
                        </div>
                        <div>
                            <label for="t-color" class="block text-sm font-medium mb-1 text-gray-400">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏µ‡∏ó‡∏µ‡∏° (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ò‡∏µ‡∏°)</label>
                            <input type="color" id="t-color" value="#facc15" required class="w-full h-10 bg-gray-800 border border-gray-700 rounded cursor-pointer">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="t-logo-url" class="block text-sm font-medium mb-1 text-gray-400">URL ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ó‡∏µ‡∏° (‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå)</label>
                            <input type="text" id="t-logo-url" class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white">
                        </div>
                        <div>
                            <label for="t-manager" class="block text-sm font-medium mb-1 text-gray-400">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°</label>
                            <input type="text" id="t-manager" class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white">
                        </div>
                    </div>
                    <div class="flex justify-end gap-2">
                        <button type="button" onclick="cancelEditTeam()" class="bg-gray-600 text-white px-4 py-2 rounded font-bold hover:bg-gray-700 transition hidden" id="team-cancel-btn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                        <button type="submit" class="text-black px-4 py-2 rounded font-bold hover:opacity-90 transition" style="background-color: var(--primary-color);" id="team-submit-btn">
                            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡∏°‡πÉ‡∏´‡∏°‡πà
                        </button>
                    </div>
                </form>
            </div>

            <div class="glass p-6 rounded-xl">
                <h2 class="text-2xl font-extrabold mb-4 flex items-center gap-3" style="color: var(--primary-color);">
                    <i class="fas fa-list"></i> ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (<span id="total-teams">0</span> ‡∏ó‡∏µ‡∏°)
                </h2>
                <div id="team-list" class="space-y-3">
                    </div>
            </div>
        </div>

        <div id="page-players" class="section hidden fade-in">
            <div class="glass p-6 rounded-xl mb-6">
                <h2 class="text-2xl font-extrabold mb-4 flex items-center gap-3" style="color: var(--primary-color);">
                    <i class="fas fa-user-plus"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞
                </h2>
                <form id="player-form" onsubmit="handlePlayerSubmit(event)">
                    <input type="hidden" id="edit-player-id">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                        <div>
                            <label for="p-name" class="block text-sm font-medium mb-1 text-gray-400">‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞</label>
                            <input type="text" id="p-name" required class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white">
                        </div>
                        <div>
                            <label for="p-no" class="block text-sm font-medium mb-1 text-gray-400">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏™‡∏∑‡πâ‡∏≠</label>
                            <input type="text" id="p-no" class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white">
                        </div>
                         <div>
                            <label for="p-team" class="block text-sm font-medium mb-1 text-gray-400">‡∏ó‡∏µ‡∏°</label>
                            <select id="p-team" required class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white">
                                </select>
                        </div>
                        <div>
                            <label for="p-img" class="block text-sm font-medium mb-1 text-gray-400">URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
                            <input type="text" id="p-img" class="w-full bg-gray-800 border border-gray-700 rounded p-2 text-white">
                        </div>
                    </div>
                    <div class="flex justify-end gap-2">
                        <button type="button" onclick="cancelEditPlayer()" class="bg-gray-600 text-white px-4 py-2 rounded font-bold hover:bg-gray-700 transition hidden" id="player-cancel-btn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                        <button type="submit" class="text-black px-4 py-2 rounded font-bold hover:opacity-90 transition" style="background-color: var(--primary-color);" id="player-submit-btn">
                            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞‡πÉ‡∏´‡∏°‡πà
                        </button>
                    </div>
                </form>
            </div>

            <div class="glass p-6 rounded-xl">
                <h2 class="text-2xl font-extrabold mb-4 flex items-center gap-3" style="color: var(--primary-color);">
                    <i class="fas fa-users"></i> ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (<span id="total-players">0</span> ‡∏Ñ‡∏ô)
                </h2>
                <div class="flex overflow-x-auto gap-3 mb-6 pb-3 no-scrollbar" id="player-team-tabs">
                    </div>
                
                <div id="player-team-banner" class="hidden p-6 rounded-xl mb-6 shadow-xl flex items-center gap-6 border-l-8" style="background: linear-gradient(135deg, var(--secondary-color) 0%, #0c1626 100%); border-color: var(--primary-color);">
                    <img id="ptb-logo" class="w-24 h-24 rounded-full object-cover border-4 border-yellow-400 shadow-md">
                    <div>
                        <h2 id="ptb-name" class="text-4xl font-extrabold uppercase italic text-white">TEAM NAME</h2>
                        <div class="text-xl font-semibold" style="color: var(--primary-color);">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å: <span id="ptb-member-count">0</span> ‡∏Ñ‡∏ô</div>
                    </div>
                    <input type="color" id="ptb-color-picker" class="hidden" oninput="updateTeamColorLive(this)">
                </div>

                <div id="player-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    </div>
            </div>
        </div>
        
    </main>

    <div id="settings-modal" class="fixed inset-0 bg-black bg-opacity-70 z-[100] flex items-center justify-center hidden">
        <div class="bg-gray-900 glass p-6 rounded-xl w-full max-w-md">
            <h2 class="text-2xl font-extrabold mb-4 flex justify-between items-center" style="color: var(--primary-color);">
                ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö 
                <button onclick="toggleSettings()" class="text-gray-400 hover:text-white"><i class="fas fa-times"></i></button>
            </h2>
            
            <div class="p-4 rounded-lg mb-4 text-left border border-gray-700 bg-gray-800">
                <h3 class="font-bold mb-3 text-white">1. ‡∏ò‡∏µ‡∏°‡∏™‡∏µ</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-sm text-gray-400 block mb-1">‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å (Primary/Accent)</label>
                        <input type="color" id="theme-color-input" class="w-full h-10 rounded cursor-pointer" onchange="updateThemeAndSave()">
                    </div>
                    <div>
                        <label class="text-sm text-gray-400 block mb-1">‡∏™‡∏µ‡∏£‡∏≠‡∏á (Header/Banner)</label>
                        <input type="color" id="secondary-color-input" class="w-full h-10 rounded cursor-pointer" onchange="updateThemeAndSave()">
                    </div>
                </div>
            </div>

            <div class="p-4 rounded-lg mb-4 text-left border border-gray-700 bg-gray-800">
                <h3 class="font-bold mb-3 text-white">2. ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏•‡∏µ‡∏Å</h3>
                <input type="file" id="global-logo-upload" accept="image/*" class="w-full text-sm text-gray-400 mb-4">
                <button onclick="saveGlobalLogo()" class="w-full text-black px-4 py-2 rounded font-bold hover:opacity-90 transition" style="background-color: var(--primary-color);">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏•‡∏µ‡∏Å</button>
                <button onclick="removeGlobalLogo()" class="w-full text-gray-400 mt-2 hover:text-red-500 transition">‡∏•‡∏ö‡πÇ‡∏•‡πÇ‡∏Å‡πâ</button>
            </div>
            
            <div class="p-4 rounded-lg mb-4 text-left border border-gray-700 bg-gray-800">
                <h3 class="font-bold mb-3 text-white">3. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                <button onclick="exportData()" class="w-full bg-blue-600 text-white px-4 py-2 rounded font-bold hover:bg-blue-700 transition mb-2">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Export)</button>
                <label for="import-file" class="block w-full text-center bg-green-600 text-white px-4 py-2 rounded font-bold hover:bg-green-700 transition cursor-pointer">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Import)</label>
                <input type="file" id="import-file" accept=".json" class="hidden" onchange="importData(this)">
            </div>
            
            <div class="p-4 rounded-lg text-left border border-gray-700 bg-gray-800">
                <h3 class="font-bold mb-3 text-red-400">‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</h3>
                <button onclick="resetSystem()" class="w-full bg-red-600 text-white px-4 py-2 rounded font-bold hover:bg-red-700 transition">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
            </div>

        </div>
    </div>

    <script>
        // Global Data Structures
        let teams = [];
        let players = [];
        let matches = []; // { teamA, teamB, scoreA, scoreB, date, week }
        let stats = [];   // { id, date, type, teamId, playerId, count }
        let schedules = []; // { id, date, teamA, teamB, week, group }
        let groups = [];    // { name: 'A', teams: ['t1', 't2', ...] } <--- NEW GROUP DATA STRUCTURE
        let globalLogo = "";
        let themeName = 'JAKHONG SYSTEM';
        let themeColor = '#facc15';
        let secondaryColor = '#1c365b';
        let currentGroupFilter = 'All';

        const STAT_TYPES = {
            goal: { label: '‡∏õ‡∏£‡∏∞‡∏ï‡∏π', color: 'text-green-400', icon: '‚öΩ' },
            assist: { label: '‡πÅ‡∏≠‡∏™‡∏ã‡∏¥‡∏™‡∏ï‡πå', color: 'text-blue-400', icon: 'üëü' },
            yellow: { label: '‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á', color: 'text-yellow-400', icon: 'üü®' },
            red: { label: '‡πÉ‡∏ö‡πÅ‡∏î‡∏á', color: 'text-red-600', icon: 'üü•' },
            save: { label: '‡πÄ‡∏ã‡∏ü', color: 'text-indigo-400', icon: 'üß§' },
        };

        // --- 0. UTILITY & THEME ---
        
        function getComputedPrimaryColor() {
             return getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim();
        }
        function getComputedSecondaryColor() {
             return getComputedStyle(document.documentElement).getPropertyValue('--secondary-color').trim();
        }

        function renderTheme() {
            document.documentElement.style.setProperty('--primary-color', themeColor);
            document.documentElement.style.setProperty('--secondary-color', secondaryColor);
            document.getElementById('theme-color-input').value = themeColor;
            document.getElementById('secondary-color-input').value = secondaryColor;
            document.getElementById('nav-title').innerText = themeName;

            // Re-render necessary elements after theme change
            renderLeaderboard(); 
            renderSchedule();
            renderDaily();
        }

        function updateThemeAndSave() {
            themeColor = document.getElementById('theme-color-input').value;
            secondaryColor = document.getElementById('secondary-color-input').value;
            renderTheme();
            save();
        }

        // --- CRITICAL: Save function with Theme Update and NEW GROUP DATA ---
        const save = () => {
            try {
                localStorage.setItem('jl_teams', JSON.stringify(teams));
                localStorage.setItem('jl_players', JSON.stringify(players));
                localStorage.setItem('jl_matches', JSON.stringify(matches));
                localStorage.setItem('jl_stats', JSON.stringify(stats));
                localStorage.setItem('jl_schedules', JSON.stringify(schedules));
                localStorage.setItem('jl_groups', JSON.stringify(groups)); // <--- SAVE NEW GROUP DATA
                localStorage.setItem('jl_logo', globalLogo);
                localStorage.setItem('jl_theme_name', themeName);
                localStorage.setItem('jl_theme_color', themeColor);
                localStorage.setItem('jl_secondary_color', secondaryColor);
            } catch (error) {
                console.error("Error saving data:", error);
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•!");
            }
        };

        // Load data from localStorage
        function loadDefaultData() {
            try {
                teams = JSON.parse(localStorage.getItem('jl_teams')) || [];
                players = JSON.parse(localStorage.getItem('jl_players')) || [];
                matches = JSON.parse(localStorage.getItem('jl_matches')) || [];
                stats = JSON.parse(localStorage.getItem('jl_stats')) || [];
                schedules = JSON.parse(localStorage.getItem('jl_schedules')) || [];
                groups = JSON.parse(localStorage.getItem('jl_groups')) || []; // <--- LOAD NEW GROUP DATA
                globalLogo = localStorage.getItem('jl_logo') || "";
                themeName = localStorage.getItem('jl_theme_name') || 'JAKHONG SYSTEM';
                themeColor = localStorage.getItem('jl_theme_color') || '#facc15';
                secondaryColor = localStorage.getItem('jl_secondary_color') || '#1c365b';
                
                if (teams.length === 0) {
                    // Initialize with sample data if first run
                    teams = [
                        { id: 't1', name: 'Phoenix FC', color: '#f59e0b', logo: '', manager: 'Manager A' },
                        { id: 't2', name: 'Dragon FC', color: '#dc2626', logo: '', manager: 'Manager B' },
                        { id: 't3', name: 'Titan FC', color: '#3b82f6', logo: '', manager: 'Manager C' },
                    ];
                    players = [
                        { id: 'p1', name: '‡∏Å‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏ü', no: '10', teamId: 't1', img: '' }, 
                        { id: 'p2', name: '‡πÄ‡∏™‡∏∑‡∏≠‡∏õ‡∏∑‡∏ô‡πÉ‡∏´‡∏ç‡πà', no: '9', teamId: 't2', img: '' }, 
                        { id: 'p3', name: '‡∏Å‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡∏´‡∏¥‡∏ô', no: '5', teamId: 't3', img: '' }, 
                    ];
                    groups = [ // Sample Group Data
                        { name: 'A', teams: ['t1', 't2'] },
                        { name: 'B', teams: ['t3'] }
                    ];
                    save(); 
                    alert('‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà! ‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° 3 ‡∏ó‡∏µ‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß');
                }

            } catch (error) {
                console.error("Error loading data:", error);
                // Fallback to empty arrays on load error
                teams = []; players = []; matches = []; stats = []; schedules = []; groups = [];
            }
        }

        // --- UI & NAVIGATION ---

        function nav(page, btn) {
            document.querySelectorAll('.section').forEach(sec => sec.classList.add('hidden'));
            document.getElementById(`page-${page}`).classList.remove('hidden');

            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');

            if (page === 'home') renderDashboard();
            if (page === 'leaderboard') renderLeaderboard();
            if (page === 'schedule') {
                renderGroupStage(groups); // <-- CALL NEW GROUP STAGE RENDER
                renderSchedule();
            }
            if (page === 'daily') renderDaily();
            if (page === 'stats') renderStatsForm();
            if (page === 'teams') renderTeams();
            if (page === 'players') renderPlayers();
        }
        
        // ... (Other utility functions like formatDate, toggleSettings, etc. are assumed to be here)
        function formatDate(d) {
            if (!d) return '';
            return new Date(d).toLocaleDateString('th-TH', {day:'2-digit', month:'2-digit', year:'numeric'});
        }
        function toggleSettings() {
             document.getElementById('settings-modal').classList.toggle('hidden');
        }


        // --- DASHBOARD (PAGE-HOME) ---
        // ... (calculateLeaderboardData, calculateDashboardStats, renderDashboard, renderManagerList functions are assumed to be here)
        function calculateLeaderboardData() {
            // ... logic to calculate standings ...
            return teams.map(t => ({...t, pts: 0, w: 0, d: 0, l: 0, gf: 0, ga: 0, gd: 0})); // Placeholder
        }
        function calculateDashboardStats() {
            const totalGoals = matches.reduce((sum, m) => sum + parseInt(m.scoreA || 0) + parseInt(m.scoreB || 0), 0);
            document.getElementById('stat-total-teams').innerText = teams.length;
            document.getElementById('stat-total-players').innerText = players.length;
            document.getElementById('stat-total-goals').innerText = totalGoals;
            document.getElementById('stat-total-stats').innerText = stats.length;
            // ... (rest of dashboard stats logic)
            document.getElementById('leader-team-name').innerText = '...';
            document.getElementById('top-scorer-name').innerText = '...';
        }
        function renderDashboard() {
            calculateDashboardStats();
            // ... (rest of dashboard rendering)
        }
        function renderManagerList() {
            // ... (logic to render manager list)
        }

        // --- LEADERBOARD (PAGE-LEADERBOARD) ---
        function renderLeaderboard() {
            const standings = calculateLeaderboardData();
            const body = document.getElementById('lb-body');
            const cBgBody = document.getElementById('lb-bg-body').value;
            const cBodyText = document.getElementById('lb-body-text-color').value;
            const cPtsGrad1 = document.getElementById('lb-pts-grad-1').value;
            const cPtsGrad2 = document.getElementById('lb-pts-grad-2').value;
            const cHeaderGrad1 = document.getElementById('lb-header-grad-1').value;
            const cHeaderGrad2 = document.getElementById('lb-header-grad-2').value;
            const cHeaderText = document.getElementById('lb-header-text-color').value;
            
            // Apply Header Theme
            document.getElementById('lb-banner').style.background = `linear-gradient(135deg, ${cHeaderGrad1}, ${cHeaderGrad2})`;
            document.getElementById('lb-thead-row').style.background = `linear-gradient(to right, ${cHeaderGrad1}, ${cHeaderGrad2})`;
            document.querySelectorAll('#lb-thead-row th').forEach(th => th.style.color = cHeaderText);
            document.getElementById('lb-thead-row').lastElementChild.children[0].style.background = `linear-gradient(135deg, ${cPtsGrad1}, ${cPtsGrad2})`;

            // ... (rest of leaderboard rendering logic)
            body.innerHTML = '<tr><td colspan="10" class="text-center py-8 text-gray-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</td></tr>'; // Placeholder for body
        }


        // --- SCHEDULES (PAGE-SCHEDULE) ---
        
        /* --- NEW: GROUP STAGE RENDER FUNCTION --- */
        function renderGroupStage(groupsData) {
            const container = document.getElementById('team-group-list');
            if (!container) return;
            container.innerHTML = ''; // Clear previous content

            if (!groupsData || groupsData.length === 0) {
                container.innerHTML = '<p class="text-white/50 col-span-full">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</p>';
                return;
            }

            const primaryColor = getComputedPrimaryColor();
            const cardBgColor = '#1f2937'; // Dark card background

            groupsData.forEach(group => {
                const teamListHtml = group.teams.map(teamId => {
                    const team = teams.find(t => t.id === teamId);
                    return `
                        <li class="flex items-center space-x-2 text-white/90">
                            <i class="fas fa-users w-4 h-4 text-center" style="color: ${primaryColor};"></i>
                            <span>${team ? team.name : 'Unknown Team'}</span>
                        </li>
                    `;
                }).join('');

                const groupCard = `
                    <div class="group-card p-4 rounded-xl shadow-2xl transition-all duration-300 transform hover:scale-[1.03] cursor-pointer" style="background-color: ${cardBgColor}; border: 1px solid ${primaryColor};" onclick="setGroupFilter('${group.name}', this)">
                        <h3 class="text-xl font-extrabold mb-3 pb-1 border-b" style="border-color: ${primaryColor}; color: ${primaryColor};">
                            GROUP ${group.name} <span class="text-sm font-normal opacity-75">(${group.teams.length} ‡∏ó‡∏µ‡∏°)</span>
                        </h3>
                        <ul class="space-y-2">
                            ${teamListHtml}
                        </ul>
                    </div>
                `;
                container.innerHTML += groupCard;
            });
        }
        /* --- END: GROUP STAGE RENDER FUNCTION --- */
        
        function setGroupFilter(group, btn) {
            currentGroupFilter = group;
            document.querySelectorAll('#group-tabs-container button').forEach(b => {
                b.classList.remove('active', 'bg-yellow-600');
                b.classList.add('bg-gray-700', 'text-white', 'hover:bg-gray-600');
            });

            if (btn) {
                btn.classList.add('active', 'bg-yellow-600');
                btn.classList.remove('bg-gray-700', 'text-white', 'hover:bg-gray-600');
            }
            renderSchedule();
        }

        function renderSchedule() {
            const schedTabs = document.getElementById('group-tabs-container');
            const schedList = document.getElementById('sched-list');
            const primaryColor = getComputedPrimaryColor();
            const filteredSchedules = currentGroupFilter === 'All' 
                ? schedules 
                : schedules.filter(s => s.group === currentGroupFilter);

            // 1. Render Group Tabs dynamically
            let tabHtml = `<button onclick="setGroupFilter('All', this)" class="group-tab ${currentGroupFilter === 'All' ? 'active text-black' : 'bg-gray-700 text-white'} px-4 py-1 rounded-full text-sm font-bold transition hover:bg-yellow-600" style="background-color: ${currentGroupFilter === 'All' ? primaryColor : ''};">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>`;
            groups.forEach(g => {
                const isActive = currentGroupFilter === g.name;
                tabHtml += `<button onclick="setGroupFilter('${g.name}', this)" class="group-tab ${isActive ? 'active text-black' : 'bg-gray-700 text-white'} px-4 py-1 rounded-full text-sm font-bold transition hover:bg-gray-600" style="background-color: ${isActive ? primaryColor : ''};">‡∏Å‡∏•‡∏∏‡πà‡∏° ${g.name}</button>`;
            });
            schedTabs.innerHTML = tabHtml;
            document.getElementById('sc-pill').style.backgroundColor = primaryColor;
            
            // 2. Group and render matches
            const grouped = filteredSchedules.reduce((acc, curr) => {
                const key = `Week ${curr.week} (${formatDate(curr.date)})`;
                if (!acc[key]) acc[key] = [];
                acc[key].push(curr);
                return acc;
            }, {});

            let html = Object.keys(grouped).sort().map(key => {
                const matchesHtml = grouped[key].map(s => {
                    const tA = teams.find(t => t.id == s.teamA);
                    const tB = teams.find(t => t.id == s.teamB);
                    const isFinished = matches.some(m => 
                        (m.teamA === s.teamA && m.teamB === s.teamB && m.date === s.date) || 
                        (m.teamA === s.teamB && m.teamB === s.teamA && m.date === s.date)
                    );
                    const statusText = isFinished ? `<span class="text-green-400 font-bold">‡πÅ‡∏Ç‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß</span>` : `<span class="text-yellow-400 font-bold">‡∏£‡∏≠‡πÅ‡∏Ç‡πà‡∏á</span>`;
                    
                    return `
                        <div class="schedule-match-card ${isFinished ? 'show-actions' : ''}" data-schedule-id="${s.id}">
                            <div class="schedule-team-container team-a">
                                <div class="flex items-center">
                                    <span class="text-lg font-bold mr-3">${tA?.name || 'N/A'}</span>
                                    <img src="${tA?.logo || ''}" class="schedule-team-logo bg-white">
                                </div>
                            </div>

                            <div class="schedule-center-info">
                                <div class="relative z-10">
                                    <div class="text-sm text-gray-400">${statusText}</div>
                                    <div class="text-4xl font-black text-white outline-text my-1">VS</div>
                                    <div class="text-xs text-gray-500">Group: ${s.group || '-'}</div>
                                </div>
                            </div>

                            <div class="schedule-team-container team-b">
                                <div class="flex items-center">
                                    <img src="${tB?.logo || ''}" class="schedule-team-logo bg-white">
                                    <span class="text-lg font-bold ml-3">${tB?.name || 'N/A'}</span>
                                </div>
                            </div>

                            <div class="schedule-actions">
                                <button onclick="openScoreModal('${s.id}')" class="bg-blue-600 text-white px-3 py-1 rounded text-sm font-bold hover:bg-blue-700 transition">
                                    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');

                return `
                    <div class="mb-6">
                        <div class="schedule-group-header">${key}</div>
                        <div class="space-y-3 mt-3">${matchesHtml}</div>
                    </div>
                `;
            }).join('') || '<p class="text-center text-gray-500 py-8">‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á</p>';

            schedList.innerHTML = html;
        }


        // --- PLAYERS (PAGE-PLAYERS) ---

        function renderPlayers() {
            const tabsContainer = document.getElementById('player-team-tabs');
            const playerGrid = document.getElementById('player-grid');
            const primaryColor = getComputedPrimaryColor();
            
            // 1. Render Team Tabs
            let selectedTeamId = tabsContainer.querySelector('.player-team-tab.active')?.dataset.teamid || 'All';

            let html = `
                <button onclick="setPlayerTeamFilter('All', this)" data-teamid="All" class="player-team-tab ${selectedTeamId === 'All' ? 'active' : ''} text-black px-4 py-1 rounded-full text-sm font-bold transition hover:opacity-80" 
                    style="background-color: ${selectedTeamId === 'All' ? primaryColor : '#4b5563'}; color: ${selectedTeamId === 'All' ? 'black' : 'white'};">
                    ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${players.length})
                </button>
            `;
            
            teams.forEach(t => {
                const teamPlayersCount = players.filter(p => p.teamId === t.id).length;
                const isActive = selectedTeamId === t.id;
                html += `
                    <button onclick="setPlayerTeamFilter('${t.id}', this)" data-teamid="${t.id}" class="player-team-tab ${isActive ? 'active' : ''} text-black px-4 py-1 rounded-full text-sm font-bold transition hover:opacity-80" 
                        style="background-color: ${isActive ? t.color : '#4b5563'}; color: ${isActive ? 'black' : 'white'};">
                        ${t.name} (${teamPlayersCount})
                    </button>
                `;
            });
            tabsContainer.innerHTML = html;

            // 2. Filter Players
            let filteredPlayers = selectedTeamId === 'All'
                ? players
                : players.filter(p => p.teamId === selectedTeamId);

            // 3. Render Player Grid
            playerGrid.innerHTML = filteredPlayers.map(p => {
                const team = teams.find(t => t.id === p.teamId);
                const stats = getPlayerCardStats(p.id);
                return `
                    <div class="player-card rounded-xl overflow-hidden cursor-pointer" onclick="editPlayer('${p.id}')">
                        <div class="player-photo-container" style="border-color: ${team?.color || primaryColor};">
                            <div class="player-num-tag" style="background: ${team?.color || primaryColor}; color: ${isDarkColor(team?.color) ? 'white' : 'black'}; border-color: white;">
                                ${p.no || '-'}
                            </div>
                            <img src="${p.img || ''}" alt="${p.name}" class="object-cover" onerror="this.src='https://via.placeholder.com/300x400.png?text=No+Photo'">
                        </div>
                        <div class="p-3">
                            <div class="text-lg font-bold truncate">${p.name}</div>
                            <div class="text-xs font-semibold uppercase" style="color: ${team?.color || primaryColor};">${team?.name || '‡∏≠‡∏¥‡∏™‡∏£‡∏∞'}</div>
                            <div class="mt-2 text-sm">
                                <span class="mr-2">‚öΩ ${stats.goals}</span>
                                <span class="mr-2 text-yellow-400">üü® ${stats.yellows}</span>
                                <span class="mr-2 text-red-600">üü• ${stats.reds}</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('') || '<p class="text-center text-gray-500 py-8 col-span-full">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞‡πÉ‡∏ô‡∏ó‡∏µ‡∏°‡∏ô‡∏µ‡πâ</p>';

            document.getElementById('total-players').innerText = players.length;
            
            // 4. FIX: Player Team Banner Update (Apply solid team color)
            const banner = document.getElementById('player-team-banner');
            const ptbLogo = document.getElementById('ptb-logo');
            const ptbName = document.getElementById('ptb-name');
            const ptbMemberCount = document.getElementById('ptb-member-count');
            
            if (selectedTeamId !== 'All' && team) {
                // *** FIX BANNER COLOR ***
                const team = teams.find(t => t.id === selectedTeamId);
                const teamColor = team.color;
                const isDark = isDarkColor(teamColor);
                
                banner.style.background = teamColor; // <-- FIXED: Use solid team color for background
                banner.style.borderColor = teamColor; 
                
                // Set text color for contrast
                banner.style.color = isDark ? 'white' : 'black';
                ptbName.style.color = isDark ? 'white' : 'black';
                
                ptbLogo.src = team.logo || '';
                ptbLogo.style.borderColor = isDark ? 'white' : 'black';

                ptbName.innerText = team.name.toUpperCase();
                ptbMemberCount.innerText = players.filter(p => p.teamId === team.id).length;
                
                banner.classList.remove('hidden');
                document.getElementById('ptb-color-picker').value = teamColor; // For live editing
            } else {
                banner.classList.add('hidden');
            }
        }
        
        function setPlayerTeamFilter(teamId, btn) {
            // Find the active tab based on the button clicked
            document.querySelectorAll('.player-team-tab').forEach(b => {
                b.classList.remove('active');
                b.style.backgroundColor = '#4b5563';
                b.style.color = 'white';
            });

            if (btn) {
                btn.classList.add('active');
                if (teamId === 'All') {
                    btn.style.backgroundColor = getComputedPrimaryColor();
                    btn.style.color = 'black';
                } else {
                    const team = teams.find(t => t.id === teamId);
                    btn.style.backgroundColor = team.color;
                    btn.style.color = isDarkColor(team.color) ? 'white' : 'black';
                }
            }

            // Re-render
            renderPlayers();
        }

        // Simple function to check if a color is dark (used for text contrast)
        function isDarkColor(hexColor) {
            if (!hexColor || hexColor.length < 7) return true;
            const r = parseInt(hexColor.substring(1, 3), 16);
            const g = parseInt(hexColor.substring(3, 5), 16);
            const b = parseInt(hexColor.substring(5, 7), 16);
            const brightness = (r * 299 + g * 587 + b * 114) / 1000;
            return brightness < 128; // Return true if color is dark
        }
        
        // ... (Other functions like getPlayerCardStats, handlePlayerSubmit, editPlayer, etc. are assumed to be here)
        function getPlayerCardStats(playerId) {
            return { goals: 0, yellows: 0, reds: 0 }; // Placeholder
        }


        // --- INITIALIZATION ---
        
        window.onload = () => {
            const today = new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[type="date"]').forEach(i => i.value = today);
            
            loadDefaultData(); // ** CRITICAL: Load defaults before rendering ** renderTheme(); 
            if(globalLogo) document.getElementById('daily-logo-img').src = globalLogo; 
            
            renderAll(); // Renders all sections that need initial data
            
            // FIX: Set initial nav state to home
            const initialButton = document.querySelector('.nav-btn');
            if (initialButton) {
                nav('home', initialButton);
            } else {
                renderDashboard();
            }
        };

        function renderAll() {
             renderDashboard();
             renderLeaderboard();
             renderStatsForm();
             renderTeams();
             renderPlayers();
             // Note: renderSchedule is called inside nav('schedule') which is called in window.onload
        }
        
        // ... (The rest of the JavaScript functions for handleTeamSubmit, handlePlayerSubmit, Stat tracking, etc. are assumed to be here)

    </script>
</body>
</html>
